Value â‡ {
  obj â† {
    this â‡ @
    SetThis â‡ { !thisâ‰¡@ â‹„ thisâ†©ğ•© }

    O â† âŠ¢
    B â† âŠ¢
    c â† âŸ¨âŸ©
    d â† 0
    g â† 0
    l â† ""

    Show â‡ {ğ•¤
      lab â† "label"â€¿"operation"â€¿"children"â€¿"data"â€¿"gradient"
      â‰> lab â‹ˆ lâ€¿oâ€¿câ€¿dâ€¿g
    }

    Repr â‡ {
      ğ•¤ â‹„ d
    }

    Grad â‡ {
      ğ•¤ â‹„ g
    }

    Chil â‡ {
      ğ•¤ â‹„ c
    }

    Oper â‡ {
      ğ•¤ â‹„ o
    }

    Label â‡ {
      ğ•¤ â‹„ l
    }

    Ba â‡ {
      B â†© ğ•
    }

    Op â‡ {
      O â†© ğ•
    }

    Ch â‡ {
      c â†© ğ•©
    }

    Gr â‡ {
      g â†© ğ•©
    }

    Da â‡ {
      d â†© ğ•©
    }

    La â‡ {
      l â†© ğ•©
    }

    Back â‡ {
      ğ•¤ â‹„ B@
    }

    Backward â‡ {ğ•¤
      v â† âŸ¨âŸ©

      TopoSort â† {
        oldV â† v
        TopoSortÂ¨ oldV (Â¬âˆ˜âˆŠ/âŠ£)Ëœ âˆ¾ { ğ•©.Chil@ }Â¨ ğ•©
        v â†© â· ğ•© âˆ¾ v
        v
      }

      { ğ•©.Back@ }Â¨ TopoSort this
      v
    }

    Apply â† {
      out â† Value ğ•Â´ { ğ•©.Repr@ }Â¨ ğ•©
      out.Op ğ•¨
      out.Ch ğ•©
      out
    }

    Tanh â‡ {ğ•¤
      F â† â€¢math.Tanh
      out â† Value F d
      out.Op f
      out.Ch â‹ˆthis

      BB â† {ğ•¤
        g â†© g + 1 - 2 â‹†Ëœ (out.Repr@) Ã— out.Grad@
      }

      out.Ba bb
      out
    }

    Add â‡ {
      F â† +

      i â† ğ•©
      out â† f Apply this â‹ˆ ğ•©

      BB â† {ğ•¤
        i.Gr (i.Grad@) + 1 Ã— out.Grad@
        g â†© g + 1 Ã— out.Grad@
      }

      out.Ba bb
      out
    }

    Mul â‡ {
      F â† Ã—

      i â† ğ•©
      out â† f Apply this â‹ˆ ğ•©

      BB â† {ğ•¤
        i.Gr (i.Grad@) + d Ã— out.Grad@
        g â†© g + (i.Repr@) Ã— out.Grad@
      }

      out.Ba bb
      out
    }

    Exp â‡ {ğ•¤
      F â† â‹†

      out â† Value F d
      out.Op f
      out.Ch â‹ˆthis

      BB â† {ğ•¤
        g â†© g + out.Grad@
      }

      out.Ba bb
      out
    }

    Pow â‡ {
      F â† â‹†âŸœğ•©
      out â† Value F d
      out.Op f
      out.Ch â‹ˆthis

      BB â† {ğ•¤
        g â†© g + ğ•© Ã— (out.Repr@) â‹† 1 -Ëœ ğ•©
      }

      out.Ba bb
      out
    }

    Neg â‡ {ğ•¤
      this.Mul Value Â¯1
    }

    Sub â‡ {
      this.Add ğ•©.Neg@
    }

    Div â‡ {
      this.Mul ğ•©.Pow Â¯1
    }
  }

  obj.SetThis obj
  obj.Da ğ•©
  obj
}
